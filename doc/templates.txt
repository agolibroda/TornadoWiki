Шаблоны

шаблоны в Вики  штука интересная 

в медиа-ваки используются как "расширения" базового внешнего вида страниц.... 

что делать, если я редактирую текст в ХТМЛ?

что я должен сделать? 

может тоже вставлять шаблоны? 

шаблоны: 
могут быть 
"внутренними" (internal)
"внешними" (external) 
в чем разница? 
да, почти ни в чем..  
ну, кроме того, что внутрение шаблоны это, допустим, оформление картинок, которые включены в страницу
Эти шаблоны могу иметь параметры - для оформления картинки - нужен ее адрес, подпись... 

Вневние шаблоны это то, куда вставляется (как единственый параметр) редактируемая страница 
внешние шаблоны привязываются к тем или иным страницам в таблице "articles" полем "template"


- пример:
есть "информационная страница" - к ней привязан "основной шаблон" (ОШ) 
и, "там где нужно" будет место для вставки текста статьи. вот, вместо ЭТОГО:  
{{article.article_title}}  - заголовок
{{article.article_annotationj}} - краткое содержание 
{{article.article_html}} - собственно, текст


все, что мы пишем, пишется в режиме "как вижу" - а значит, шалон вставил, и сразу его увидел на странице.
но, шаблон это кусок текста, который меняется отдельно. 
(так получается, что его нельзя редактировать "по - ходу"? или как?)
ну ла, потом... 

при разработке шаблонов используется максимально "питоновский" синтаксис управления: 

{{""}}" или "{%""%}"

и вообще, макимально - питоновский шаблон!!!!!!

как набирать шаблоны, из СОХРАНЕННЫХ шаблонов, надо еще думать!!!!
 

ОШ состоит из нескольких шаблонов:
- шаблон заголовка
- шаблон подвала
- шаблон меню навигации
- шаблон меню действий
- шаблон вложений

эти вставки можно оформить примерно так:
{% extends "head_tpl.html" %}
{% extends "foter_tpl.html" %}
{% extends "menu_tpl.html" %} 

ну да, вот только при использовании сохраненых шаблонов, мы получаем расширеие вида {% extends "tmp/123.html" %} 

не очень приятно, что все это "предопределенные" шаблоны... 
надо придумать, как вставлять шаблоны по имени (или номеру) - что бы удобнее было разработчикам 
ваять новые шаблоны страниц...

и, надо придумать, как делать "вызовы команд" ....

похоже, это лабуда.... 

Почему - то в шаблонизаторах питона используются пары "{{""}}" или "{%""%}" как служебные, 
 
....


у шаблона могут быть параметры... 
поступаем по - аналогии с "МВ"

[%Thankyou|Подпись|все ваши усилия%] 
	текст вставленного шаблона [%1%] -продолжение текста шаблонаи [%2%] вставка еще одного параметра    
[%Thankyou%]

или, параметры могут быть именованными
[%Thankyou|signature=Подпись|reason=за то что ты есть%] 
	текст вставленного шаблона [%signature%] продолжение текста шаблона  [%reason%] вставка еще одного параметра  
[%Thankyou%]

теперь, что произойдет при редактировании шаблоны? 

порядок подстановки шаблонов. 
возможно, тут я смогу понять что и на что я меняю.


"внешие" шаблоны:
каждая статья "знает" каким шаблонам она отображается пользователю. 
(ИД текста шаблона в таблице "articles" поле "template")
каждый шаблон готовится, да и является текстом в системе.

поцедура визуализации:
- вызов статьи к просмотру
-- получить маттериалы статьи (актуальные - текст, аннотацию, название. ИД шаблона) 
по ИД шаблона получить назвонеи "рабчего щаблона", 
проверить наличие  рабочего шаблона в директории "рабочие шаблоны" 
а те шаблоны, которые есть сейчас, становятся "админовскими" :-) 

--- если рабочий шаблон не найден,  тогда взять текст шаблона из таблицы "articles" по его ИД 
 отрендерить, и сожраить его в директорию "рабочие шаблоны"
--- имя шаблона актуально, значит, подставить, визуализировать
(стандартную процедуру "self.render("home.html", articles=articles)" пока обманывать не буду)


обработка статей 

статья шранится в 2-х состояниях:
- сам текст стаьи (БЕЗ шаблонных вставок) "исходник"- (в табличке "texts") 
- полностью готовый к выводу текст (со ВСЕМИ развернутыми ШАБЛНАМИ) "печатная копия" (в табличке "articles") 

значит, перед согранением статьи после редактированя нужно сделать 2 процесса:
- очистка шаблонов (для создания "исходника") 
- полная развертка всех шаблонов (в том числе "внешних") для создания "печатной копии"


