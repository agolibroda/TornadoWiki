Шаблоны

шаблоны в Вики  штука интересная 

в медиа-ваки используются как "расширения" базового внешнего вида страниц.... 

что делать, если я редактирую текст в ХТМЛ?

что я должен сделать? 

может тоже вставлять шаблоны? 

шаблоны: 
могут быть 
"внутренними" (internal)
"внешними" (external) 
в чем разница? 
да, почти ни в чем..  
ну, кроме того, что внутрение шаблоны это, допустим, оформление картинок, которые включены в страницу
Эти шаблоны могу иметь параметры - для оформления картинки - нужен ее адрес, подпись... 

Вневние шаблоны это то, куда вставляется (как единственый параметр) редактируемая страница 
внешние шаблоны привязываются к тем или иным страницам в таблице "articles" полем "template"
кста, интересно, а как надо оформлять "шаблоны как таковые"? 

- пример:
есть "информационная страница" - к ней привязан "основной шаблон" (ОШ) 
ОШ состоит из нескольких шаблонов:
- шаблон заголовка
- шаблон подвала
- шаблон меню навигации
- шаблон меню действий
- шаблон вложений
и, "там где нужно" будет место для вставки текста статьи. вот, вместо ЭТОГО:  
{{article.article_title}}  - заголовок
{{article.article_annotationj}} - краткое содержание (VARCHAR 1024) - Это НАДО добавить!!!!! 
{{article.article_html}} - собственно, текст


все, что мы пишем, пишется в режиме "как вижу" - а значит, шалон вставил, и сразу его увидел на странице.
но, шаблон это кусок текста, который меняется отдельно. 
(так получается, что его нельзя редактировать "по - ходу"? или как?)
ну ла, потом... 

Почему - то в шаблонизаторах питона используются пары "{{""}}" как служебные, поэтому.


у шаблона могут быть параметры... 
поступаем по - аналогии с "МВ"

{{Thankyou|Подпись|все ваши усилия}} 
	текст вставленного шаблона {{1}} -продолжение текста шаблонаи {{2}} вставка еще одного параметра    
{{Thankyou}}

или, параметры могут быть именованными
{{Thankyou|signature=Подпись|reason=за то что ты есть}} 
	текст вставленного шаблона {{signature}} продолжение текста шаблона  {{reason}} вставка еще одного параметра  
{{Thankyou}}

теперь, что произойдет при редактировании шаблоны? 

порядок подстановки шаблонов. 
возможно, тут я смогу понять что и на что я меняю.


"внешие" шаблоны:
каждая статья "знает" каким шаблонам она отображается пользователю. 
(ИД текста шаблона в таблице "articles" поле "template")
каждый шаблон готовится, да и является текстом в системе.

поцедура визуализации:
- вызов статью к просмотру
-- получить маттериалы статьи (актуальные - текст, аннотацию, название. ИД шаблона) 
по ИД шаблона получить назвонеи "рабчего щаблона", 
проверить наличие  рабочего шаблона в директории "рабочие шаблоны" 
--- если рабочий шаблон не найден,  тогда взять текст шаблона из таблицы "articles" по его ИД 
 и сожраить его в директорию "рабочие шаблоны"
--- имя шаблона актуально, значит, подставить, визуализировать
(стандартную процедуру "self.render("home.html", articles=articles)" пока обманывать не буду)


обработка статей 

статья шранится в 2-х состояниях:
- сам текст стаьи (БЕЗ шаблонных вставок) "исходник"- (в табличке "texts") 
- полностью готовый к выводу текст (со ВСЕМИ развернутыми ШАБЛНАМИ) "печатная копия" (в табличке "articles") 

значит, перед согранением статьи после редактированя нужно сделать 2 процесса:
- очистка шаблонов (для создания "исходника") 
- полная развертка всех шаблонов (в том числе "внешних") для создания "печатной копии"


